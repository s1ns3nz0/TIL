# 클라우드 환경 이해
## 1. 3-Tier Architecture
```
[Internet] 
    ↓
[Load Balancer] - Public Subnet
    ↓
[Web/App Servers] - Private Subnet (Auto Scaling)
    ↓
[Database] - Private Subnet (Multi-AZ)
```
## 2. 4-Tier Architecture
```
[Internet]
    ↓
[CDN / WAF] - Edge
    ↓
[Load Balancer] - Public Subnet
    ↓
[Web Servers] - Private Subnet (정적 컨텐츠, 프록시)
    ↓
[App Servers] - Private Subnet (비즈니스 로직)
    ↓
[Database] - Private Subnet (데이터 계층)
```
## 3. 웹 서비스 표준 아키텍처
```
[Route 53 DNS]
    ↓
[CloudFront CDN]
    ↓
[WAF] - DDoS 방어, SQL Injection 차단
    ↓
[ALB] - Public Subnet (Multi-AZ)
    ↓
[Auto Scaling Group] - Private Subnet
  - Web/App EC2 (Golden AMI)
  - Target Tracking: CPU 70% 기준
    ↓
[RDS] - Private Subnet (Multi-AZ, Read Replica)
    ↓
[S3] - 정적 자산, 로그, 백업
```
## 4. AWD 기타 서비스
### 1) GuardDuty
- 머신 러닝 기반 위협 탐지 서비스
- VPC Flow Logs, CloudTrail, DNS 로그 분석
- 비정상 API 호출, 크립토마이닝 탐지
- SNS, Lambda 를 활용해서 자동 대응 가능
### 2) Auto Scaling
- Launch Template: 어떤 AMI, 인스턴스 타입 사용할지
- Auto Scaling Group: 최소/최대/원하는 용량
- Scaling Policy: 언제 scale out/in 할지
- Target Tracking: CPU 70% 유지하도록 자동 조정
- Step Scaling: CPU 80%면 +2대, 90%면 +5대
- Scheduled Scaling: 평일 9시 10대, 18시 5대
- Predictive Scaling: ML로 패턴 학습하여 사전 확장

## 5. 리소스 확보 방법과 필요성
### 1) 필요성
비용 최적화: 미사용 리소스 식별 (EBS 볼륨, 유휴 EIP)
보안: 보안그룹 오픈, 패치 누락 확인
컴플라이언스: 규정 준수 여부 추적
장애 대응: 어떤 리소스가 어디에 있는지 파악
변경 관리: 누가 언제 무엇을 변경했는지
### 2) 방법
AWS Config: 리소스 변경 이력, 규정 준수 체크
CloudTrail: API 호출 로그 (누가 무엇을 했는지)
Resource Groups & Tag Editor: 태그 기반 리소스 그룹화
Systems Manager Inventory: EC2 SW/패치 현황
Cost Explorer: 비용 분석 및 예측

## 6. 운영/모니터링
### 1) 로그 (Logs)
무엇: 특정 시점에 발생한 이벤트 기록 (텍스트)
예시: [ERROR] DB connection timeout at 2025-02-10 14:23:45
용도: 디버깅, 에러 원인 파악, 감사
도구: ELK Stack, CloudWatch Logs, Splunk
특징: 상세하지만 용량 크고, 검색/분석 필요
### 2) 메트릭 (Metrics)
무엇: 시간에 따른 수치 데이터 (숫자)
예시: CPU 사용률 70%, 요청/초 1500, 응답시간 120ms
용도: 트렌드 분석, 알람, 용량 계획
도구: Prometheus, CloudWatch, Datadog
특징: 집계 가능, 가벼움, 대시보드화 용이
### 3) 트레이싱 (Tracing)
무엇: 분산 시스템에서 요청의 전체 경로 추적
예시: API Gateway(10ms) → Auth(50ms) → App(200ms) → DB(150ms)
용도: 병목 지점 파악, 서비스 간 의존성 파악
도구: Jaeger, Zipkin, AWS X-Ray
특징: 요청 ID(Trace ID)로 전체 흐름 연결